{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Budget Tracker</title>
  <link rel="stylesheet" href="{% static 'css/Dashboard.css' %}">
</head>
<body>
  <!-- Navigation Bar -->
  <nav class="nav">
    <div class="log">
      <h5>Budget <span>Tracker</span></h5>
    </div>
    <div class="lo-btn">
      <a href="{% url 'user_logout' %}" class="btn">Log out</a>
      <button class="btn-1" onclick="switchs()">Switch Mode</button>
    </div>
  </nav>

  <!-- Expense Form -->
  <form method="POST" action="{% url 'Dashboard' %}" id="expense-form">
    {% csrf_token %}
    <div class="form-row">
      {{ form.category }}
      <label for="amount">₹</label>
      {{ form.amount }}
      <button type="submit">Add</button>
    </div>
  </form>

  <!-- Clear All Button -->
  <form method="POST" action="{% url 'clear_expenses' %}" onsubmit="return confirmClear();">
    {% csrf_token %}
    <button type="submit" class="btn danger-btn">Clear All Expenses</button>
  </form>

  <!-- Expenses List -->
  <div class="homw">
    <h1>Expenses:</h1>
    <div id="expense-list">
      {% if expenses %}
        <ul>
          {% for expense in expenses %}
             <li>{{ expense.category }} - ₹{{ expense.amount }} 
                <small>({{ expense.date_added|date:"M d, Y H:i" }})</small>
             </li>
          {% endfor %}
        </ul>
      {% else %}
        <p>No expenses yet.</p>
      {% endif %}
    </div>
    <div class="total-box">
  <h2>Total Spent: ₹{{ total }}</h2>
</div>
  </div>

  <script>
    function confirmClear() {
      return confirm("Are you sure you want to delete all expenses?");
    }
    function switchs() {
      document.body.classList.toggle("dark-mode");
    }
  </script>
</body>
</html>
